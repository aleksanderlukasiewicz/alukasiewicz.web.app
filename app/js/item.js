const COMPONENTS_VERSION=1;let ItemComponentBuilder=async function(e,t,n){if("string"==typeof e)return e;let o,r=e.type,c=e.arguments||{};switch(e.Dt&&(r="none"),r){default:if(o=document.createElement("DIV"),o.classList.add("section"),e.title){let t=document.createElement("DIV");t.className="section-title font-subtitle",t.innerText=e.title,o.append(t)}"string"==typeof e.content?o.append(e.content):e.content.forEach((async e=>o.append(await ItemComponentBuilder(e,t,n))));break;case"quote":o=document.createElement("DIV"),o.className="quote";let r=document.createElement("DIV");r.className="font-header",r.innerHTML=e.content;let l=document.createElement("SPAN");l.className="font-base",l.innerHTML=e.He,o.appendChild(r),o.appendChild(l);break;case"gallery":o=document.createElement("DIV"),o.classList.add("gallery");let i=[],a=c.Ht||e.Ie.length;a=a>5?5:a;let u=c.Wt||[...Array(5).keys()];if(u.length<a)for(let e=u.length-1;e<a;e++)u[e]=e;if(!c.qt&&e.Ie.length>1){o.innerHTML="<div><b class='font-subtitle'>"+e.title+"</b></div>",o.classList.add("show-controls");let t=document.createElement("A");t.innerHTML="<i class='mi mi-Picture'></i><span>Show all</span>",t.classList.add("button"),t.onclick=function(){ViewController.navigate(VIEW.Ie,{oe:[n.id,n.ge[e.zt].ge[u[0]].hash],Te:n})},o.children[0].appendChild(t)}let s=document.createElement("DIV");s.classList.add("list"),o.appendChild(s);for(let t=0;t<a;t++){let o=u[t],r=e.Ie[o],c=document.createElement("IMG");c.alt=r?.Ft?.alt||"",c.src=r.src,c.classList.add(GLOBAL.loading),s.appendChild(c),i.push(ImageHelper(c,(function(t){t.onclick=function(){ViewController.navigate(VIEW.Ie,{oe:[n.id,n.ge[e.zt].ge[o].hash],Te:n})},t.classList.remove(GLOBAL.loading)}),(function(e){e.classList.remove(GLOBAL.loading)})))}if(Promise.all(i.map((async e=>await e))),o.classList.add("items-count-"+a),e.arguments?.alt){let t=document.createElement("span"),n="boolean"==typeof e.arguments.alt?e.Ie[0].Ft.alt:e.arguments.alt;t.innerHTML=n,t.classList.add("img-alt"),o.appendChild(t)}break;case"link":o=document.createElement("A"),o.classList.add("link"),o.innerHTML=e.content,o.href=e.href,o.target=e.target}return o},ItemBuilder=function(e){let t=e.W;e.content.map((async function(n,o){if(n.Ie){let r=0;for(;r<n.Ie.length;){let e=ResourceConverter(n.Ie[r],APP.l+t+APP.t,n.id||o);n.Ie.splice(r,1,...e),r+=e.length}n.zt=e.ge.length,e.ge.push(new ResourceGroup(n.Ie))}})),e.debug&&console.log(e)},ResourceConverter=function(e,t,n){let o=[];switch(e.type){case"group":ItemController.Ge(e.id).content.forEach((t=>{t.j.Kt||o.push(new Resource(APP.l+t.W+t.P.B,"image",createHash(APP.l+t.W+t.P.B+n),e.Ft))}));break;case"image":o.push(new Resource(t+e.src,"image",createHash(t+e.src+n),e.Ft));break;case"item":let r=ItemController.Oe(e.id);o.push(new Resource(APP.l+r.W+r.P.B,"image",createHash(APP.l+r.W+r.P.B+n),e.Ft));break;default:o.push(e)}return o};