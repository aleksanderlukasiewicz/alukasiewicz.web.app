"scrollRestoration"in history&&(history.scrollRestoration="manual"),Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(let t=this.length-1;t>=0;t--)this[t].parentElement.removeChild(this[t])};const CREATE_HASH=function(t,e=0){let o=3735928559^e,n=1103547991^e;for(let e,i=0;i<t.length;i++)e=t.charCodeAt(i),o=Math.imul(o^e,2654435761),n=Math.imul(n^e,1597334677);return o=Math.imul(o^o>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(o^o>>>13,3266489909),4294967296*(2097151&n)+(o>>>0)};let Resource=function(t,e,o=CREATE_HASH(t),n={}){return{src:t,type:e,hash:o,Ft:n}},ResourceGroup=function(t=[],e){this.co=function(e){Array.isArray(e)?e.forEach((e=>t.push(e))):t.push(e)},this.ge=t,this.selected=e},ResourceDictionary=function(t=[]){let e=this;this.wo=t=>e.push(t)-1,t.forEach((t=>this.push(t)))};ResourceDictionary.prototype=new Array,ResourceDictionary.constructor=ResourceDictionary;let View=function(t,e,o={},n={},i=null,r=!1,a=ViewController.M.H){return{id:t,url:e,data:o,event:n,U:i,_:r,q:a}},ErrorClass=function(t,e,o,n=[],i=!0){return{id:t,title:e,message:o,ht:n,tt:i}},HistoryItem=function(t,e,o,n){return{id:t,index:e,gt:o,j:n}},ItemDate=function(t,e,o){if(this.wt=function(t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]){return t[this.h-1]+"&nbsp;"+this.m+",&nbsp;"+this.C},this.toString=function(){return this.C.toString()+(this.h<10?"0"+this.h.toString():this.h.toString())+(this.m<10?"0"+this.m.toString():this.m.toString())},this.Xt=function(t){let e=parseInt(t);return e>parseInt(this.toString())?-1:e<parseInt(this.toString())?1:0},"object"==typeof arguments[0])this.m=arguments[0].m,this.h=arguments[0].h,this.C=arguments[0].C;else{let n=new Date;this.m=t||n.getDate(),this.h=e||n.getMonth()+1,this.C=o||n.getFullYear()}},EventController=function(t=[]){let e={};t.forEach((t=>e[t]=[])),this.addEventListener=(t,o=function(){})=>e[t].push(o),this.I=async(t,o=[])=>await Promise.all(e[t].map((t=>t(...o))))},ViewController=function(){let t,e,o,n={},i=[],r=-1,a=-1,l={};EventController.call(n,["navigateToView","navigationRequest","navigateFromView","navigateDefault","historyEdit"]);let s,u=[],c=[];n.nt=function(t){-1==u.findIndex((e=>t.id==e.id))&&u.push(t)},n.rt=function(t,o=!1){let n=u.find((e=>t==e.id||t.id==e.id)),r=!0;n.ht.forEach((t=>{c.includes(t)&&(r=!1)})),r&&(o?(i.forEach((t=>t.re?t.event?.lt.call(t,n):"")),s=n):e.event?.lt.call(e,n),c.push(n.id))};let d=async function(t,e){t.J&&!t.X&&(t.J=!1,t.X=!0,await(t.event.K?.call(t,e)))};return n.navigate=async function(l,u={}){await n.I("navigationRequest",[l,e]);let c=e?.io?.oe||[];if(l==e?.id&&(u.oe?.join("/")||"")==c.join("/"))return;let w=(e=>i.find((t=>t.id==e))||t)(l);var h;e&&(d(e),(h=e).q==n.M.ee&&(h.X=!1),e.event.$?.call(e,u),await n.I("navigateFromView",[e,u]),o=e),u.te||(r++,w==t&&(a=r));let f=new HistoryItem(w.id,r,a,{oe:u.oe});e=w,e.io=u,e.ro="/"+e.url+(u.oe?.length>0?"/"+(u.oe?.join("/")||""):""),e.ao=f,function(t){"string"==typeof t.U&&(t.U=getById(t.U))}(e),await n.I("historyEdit",[f,w]),await function(t){t._&&!t.re&&(s&&t.event?.lt.call(t,s),t.event.ae?.call(t),t.re=!0)}(e),await n.I("navigateToView",[e,o,u]),await(e.event.se?.call(e,u)),e.q!=n.M.le&&await async function(t,e){return t.J||t.X||(t.J=!0,await(t.event.Y?.call(t,e))),t}(e,u).then((t=>d(t,u)))},n.register=function(e,o=!1){i.push(e),e._||e.event.ae?.call(e),o&&(t=e)},n.ce=async function(o){if(e==t)return;await n.I("navigateDefault",[o]);let i=history.state.gt,r=i-history.state.index;-1!=i&&0!=r?history.go(r):ViewController.navigate(null,o)},n.back=function(t={}){l=t,0==history.state.index?n.ce():history.back()},n.M={H:"single",ee:"always",le:"never"},n.Mt=function(t,e=l){r=t.index,a=t.gt;let o=Object.assign({te:!0},t.j,e);n.navigate(t.id,o),l={}},n}(),ItemController=function(){let t,e=[],o=[],n=[],i=!1,r=!1,a={},l=function(t,e){let o=t.Xe||t.ct;return(e.Xe||e.ct).Xt(o)};EventController.call(a,["fetchGroup","fetchGroupFinish","fetchItem","fetchItemFinish"]),ViewController.nt(new ErrorClass("item_not_found","Item don't exist","We don't have what you're looking for",["item_outdated","item_load_error","group_not_found"])),ViewController.nt(new ErrorClass("group_not_found","Group don't exist","We don't have what you're looking for",["item_outdated","item_load_error"])),ViewController.nt(new ErrorClass("item_not_fetched","Item cannot be loaded","Check your internet connection"));let s=function(t){var e;t.id=t.id||(e=t.title,encodeURIComponent(e.toLowerCase().replaceAll(" ","-"))),t.ct=new ItemDate(t.ct),t.Xe&&(t.Xe=new ItemDate(t.Xe))},u=t=>o.find((e=>e.source==t))?.target,c=t=>e.find((e=>e.source==t))?.target,d=async function(e){await Promise.all(e.map((async e=>{!function(t){t.content=[],t.type=GLOBAL.group,s(t),o.push(new Route(t.id,t))}(e),n.push(e),e.L?.forEach((t=>o.push(new Route(t,e)))),e.F&&(t=e),await a.I("fetchGroup",[e])}))),n.forEach((t=>t.G?.forEach((e=>u(e)?.content.push(t))))),await a.I("fetchGroupFinish"),r=!0},w=async function(t){if(t){if(!t.Qt&&!t.fe){let e=await async function(t){return new Promise(((e,o)=>fetch(ITEM.W+t.W+ITEM.t+"/"+ITEM.fileName).then((t=>{e(t.json())})).catch((t=>{o(t)}))))}(t,t.W);ItemStuctureBuilder(t,e),t.fe=!0}return t}ViewController.rt("item_not_found")};return a.no=async function(o,n,c=l){r||await d(o),i||await async function(o,n){await Promise.all(o.map((async t=>{s(t),t.type=GLOBAL.item,e.push(new Route(t.id,t))}))),o.sort(n),await Promise.all(o.map((async o=>{t.content.push(o),o.L?.forEach((t=>e.push(new Route(t,o)))),o.G?.forEach((t=>u(t)?.content.push(o))),await a.I("fetchItem",[o])}))),await a.I("fetchItemFinish",[]),i=!0}(n,c)},Object.defineProperties(a,{storage:{get:()=>n},ve:{get:()=>i},Be:{get:()=>r},Ge:{value:u},Oe:{value:t=>c(t)},pe:{value:async t=>await w(c(t))},yt:{value:(t,e)=>function(t,e){let o,n=t.find((t=>(o=t.ge.find((t=>t.hash==e)),!!o)));return n.selected=o,n}(t,e)}}),a}();const landingView=new View(VIEW.o,APP.url.o,{scrollY:-1,Re:!1},{se:function(){this.data.scrollY>=0&&window.scroll(0,this.data.scrollY),document.title=APP.name,ItemController.ve||ViewController.rt("item_load_error")},ae:function(){let t=getById("profile-link-button");t.href=APP.url.profile,t.addEventListener("click",(()=>{event.preventDefault(),ViewController.navigate(VIEW.profile)})),this.data.Se=getById("main-list")},$:function(){this.data.scrollY=window.scrollY,this.U.classList.remove(GLOBAL.error)},K:function(){this.U.classList.remove(GLOBAL.loading),this.data.Se.getElementsByClassName(GLOBAL.A+" no-data").remove()},Y:async function(){this.U.classList.add(GLOBAL.loading),ItemController.ve&&ItemController.Be&&StorageResponseBuilder(await ItemController.Ge("landing"),this.data.Se,1,-1)},lt:function(t){this.U.classList.add(GLOBAL.error),createErrorMsg(t,getById("landing-error-node"))}},VIEW.o,!0,ViewController.M.H),profileView=new View(VIEW.profile,APP.url.profile,{},{se:()=>{window.scroll(0,0),document.title="About me - "+APP.name}},VIEW.profile,!0,ViewController.M.le),itemView=new View(VIEW.item,APP.url.item,{Te:null},{se:()=>window.scroll(0,0),$:function(){this.U.classList.remove(GLOBAL.error)},ae:function(){this.data.At=getById("item-title"),this.data.Lt=getById("item-content"),this.data.vt=getById("item-info")},Y:async function(t){if(this.U.classList.add(GLOBAL.loading),!ItemController.ve)return void ViewController.rt("item_load_error");let e;if(this.data.Te?.id!=t.oe[0]){try{e=await ItemController.pe(t.oe[0])}catch(t){return ViewController.rt("item_not_fetched",!1),void console.error(t)}if(e){if(e.Qt)return window.open(e.Qt,"_blank").focus(),void ViewController.ce();this.data.Te=e,document.title=e.title+" - "+APP.name,this.data.At.innerHTML=e.title,this.data.vt.innerHTML=e.ct.wt()+(e.Xe?" <u class='dotted-separator'></u> Updated "+e.Xe.wt():""),this.data.Lt.innerHTML="",this.data.Lt.append(await ItemComponentBuilder(e.content,e.W,e))}else ViewController.rt("item_not_found")}},K:function(t){this.U.classList.remove(GLOBAL.loading)},lt:function(t){this.U.classList.add(GLOBAL.error),createErrorMsg(t,getById("item-error-node"))}},VIEW.item,!0,ViewController.M.ee),groupView=new View(VIEW.group,APP.url.group,{scrollY:-1},{ae:function(){let t=this.data;t.Ct=getById("group-data"),t.Bt=getById("group-list"),t.Pt=getById("group-title"),t.Ot=getById("group-info")},se:()=>window.scroll(0,0),$:function(){Array.prototype.forEach.call(this.data.Bt.getElementsByClassName(GLOBAL.A),(t=>t.classList.add("loading","no-data"))),this.U.classList.remove(GLOBAL.error)},Y:async function(t){this.U.classList.add(GLOBAL.loading),this.data.Ct.classList.add(GLOBAL.loading),ItemController.ve||ViewController.rt("item_load_error");let e=await ItemController.Ge(t.oe[0]);e?(this.data.Fe=e,this.data.Pt.innerHTML=e.title,document.title=e.title+" - "+APP.name,this.data.Ot.innerHTML=e.ct.wt()+" <u class='dotted-separator'></u> "+e.content.length+"&nbsp;"+(1!=e.content.length?"items":"item"),this.data.Ct.classList.remove(GLOBAL.loading),await StorageResponseBuilder(e,this.data.Bt,1,-1)):ViewController.rt("group_not_found")},K:function(){this.U.classList.remove(GLOBAL.loading),this.data.Bt.getElementsByClassName("no-data").remove()},lt:function(t){this.U.classList.add(GLOBAL.error),createErrorMsg(t,getById("group-error-node"))}},VIEW.group,!0,ViewController.M.ee),resourceView=new View(VIEW.Ie,APP.url.Ie,{},{se:function(){document.title="Gallery - "+APP.name},ae:function(){ViewController.nt(new ErrorClass("image_not_found","Image not found","Try refresh page",["item_not_found","item_outdated","item_load_error"],!0));let t=this;this.data.Gt=new ResourceSlider;let e=this.data.bt=getById("image-viewer-list"),o=getById("image-viewer-prev"),n=getById("image-viewer-next");n.addEventListener("click",this.data.Gt.next),o.addEventListener("click",this.data.Gt.Tt),getById("image-viewer-close").addEventListener("click",ViewController.back);let i=function(t){n.classList.toggle(GLOBAL.hidden,t),o.classList.toggle(GLOBAL.hidden,t)};this.data.Gt.addEventListener("render",(async function(o,n,i,r,a,l,s,u){let c=e.children,d=c[n];d.children[0].src=o.src,c[a].children[0].src=r.src,c[s].children[0].src=l.src,c[i[1]?.index]?.classList.remove("previous","next","old"),c[n].classList.add(1==u?"next":"previous",GLOBAL.u),c[i[0]?.index]?.classList.remove("next","previous","start",GLOBAL.u),c[i[0]?.index]?.classList.add(1==u?"next":"previous","old"),history.state.j.oe=[t.data.Te.id,o.hash],history.replaceState(history.state,"","/"+t.url+"/"+t.data.Te.id+"/"+o.hash),await ImageHelper(d.children[0],void 0,void 0,(function(){d.classList.remove(GLOBAL.loading)}))})),this.data.Gt.addEventListener("load",(function(){let t=document.createElement("DIV");t.classList.add(GLOBAL.loading,"img");let o=document.createElement("IMG");t.appendChild(o),e.appendChild(t)})),this.data.Gt.addEventListener("loadFinish",(t=>i(t.length<2))),this.data.Gt.addEventListener("close",(()=>{e.innerHTML="",i(!0)})),GestureBuilder(this.U,{right:this.data.Gt.next,left:this.data.Gt.Tt,so:this.data.Gt.next,lo:this.data.Gt.Tt})},Y:async function(t){this.data.Te=t.Te||await ItemController.pe(t.oe[0]);let e=ItemController.yt(this.data.Te.ho,t.oe[1]);e?await this.data.Gt.Et(e.ge,e.selected,!1):ViewController.rt("image_not_found",!1)},$:function(){this.U.classList.remove(GLOBAL.error),this.data.Gt.close()},lt:function(t){this.U.classList.add(GLOBAL.error),createErrorMsg(t,getById("resources-error-node"))}},VIEW.Ie,!0,ViewController.M.ee);ViewController.register(landingView,!0),ViewController.register(profileView),ViewController.register(itemView),ViewController.register(groupView),ViewController.register(resourceView),ViewController.addEventListener("historyEdit",((t,e)=>{0==t.index||e.io.te?history.replaceState(t,"",e.ro):history.pushState(t,"",e.ro)})),ViewController.addEventListener("navigateToView",((t,e)=>{CONTENT_NODE.classList.remove("closing"),t.U.classList.add(GLOBAL.u),APP_NODE.classList.replace(e?.id,t.id),document.body.classList.toggle("scroll-fix",!isScrollbarVisible())})),ViewController.addEventListener("navigateFromView",(async t=>{await PlayViewUnLoadingAnimation(),t.U.classList.remove(GLOBAL.u)})),ViewController.addEventListener("navigationRequest",(()=>closeNavigation())),window.addEventListener("load",(async function(){ViewController.nt(new ErrorClass("item_load_error","Items cannot be loaded","Try refreshing the page")),ViewController.nt(new ErrorClass("item_outdated","Items are outdated","Try refreshing the page")),getById("home-button").addEventListener("click",(t=>{t.preventDefault(),ViewController.ce()})),getById("main-header-about-button").addEventListener("click",(t=>{t.preventDefault(),ViewController.navigate(VIEW.profile)})),getById("main-header-work-button").addEventListener("click",(t=>{t.preventDefault(),ViewController.navigate(VIEW.group,{oe:["work"]})}));try{await ItemController.no(storageGroups(),storageItems())}catch(t){ViewController.rt("item_load_error",!0),console.error(t)}history.state?ViewController.Mt(history.state):await ViewController.navigate(START_ROUTE.target,{oe:APP.do.slice(1,APP.do.length-1)}),APP_NODE.classList.add(GLOBAL.loaded)})),window.addEventListener("popstate",(t=>ViewController.Mt(t.state))),window.onresize=()=>document.body.classList.toggle("scroll-fix",!isScrollbarVisible());let createItemTile=async function(t,e){if("A"!=t.nodeName){let e=t;t=document.createElement("A"),e.parentElement.replaceChild(t,e)}let o=ITEM.W+e.W+e.P.B;t.className="item "+GLOBAL.A+" "+GLOBAL.loading+" index-"+e.Ut,t.innerHTML="";let n=document.createElement("DIV");n.classList.add("img");let i=document.createElement("IMG");i.src=o,i.alt=e.title,n.appendChild(i);let r=document.createElement("B");r.classList.add("font-subtitle"),r.innerHTML=e.title;let a=document.createElement("SPAN");a.classList.add("font-base"),a.innerHTML=e.P.content;let l=document.createElement("DIV");l.classList.add("labels");let s=createButton(e.Qt?"mi-OpenInNewWindow":"mi-BackMirrored",e.Qt?"Open link":"Read more","DIV",!0);l.appendChild(s);let u=e.Xe||e.ct,c=document.createElement("DIV");c.classList.add("label","font-caption");let d=document.createElement("I");return e.Xe&&d.classList.add("mi","mi-Update"),c.innerHTML=" &nbsp;&nbsp;"+u.wt(),c.insertBefore(d,c.firstChild),l.appendChild(c),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(l),await new ImageHelper(i,(function(){i.style=e.j?.We||""}),(function(){e.xe=!0,removeResourceFromCache(o)})),t.classList.replace(GLOBAL.loading,GLOBAL.loaded),t.onclick=function(){event.preventDefault(),e.Qt?window.open(e.Qt,"_blank").focus():ViewController.navigate(VIEW.item,{oe:[e.id]})},t.href=e.Qt||APP.url.item+"/"+e.id,setTimeout((()=>t.classList.remove(GLOBAL.loaded)),300),t},createGroupTile=function(t,e){if("DIV"!=t.nodeName){let e=t;t=document.createElement("DIV"),e.parentElement.replaceChild(t,e)}t.innerHTML="",t.className="group "+GLOBAL.A;let o=document.createElement("SPAN");o.classList.add("font-title"),o.innerHTML=e.title;let n=createButton("mi-ShowAll","Show all");return t.appendChild(o),t.appendChild(n),t.children[1].onclick=function(){event.preventDefault(),ViewController.navigate(VIEW.group,{oe:[e.id]})},t.children[1].href=APP.url.group+"/"+e.id,t},StorageResponseIndexer=function(t,e=1,o=3,n=0,i=3){let r=[],a=0,l=0,s=n,u=function(t){t&&!t.hidden&&(t.Ue=!0,r.push({index:s,kt:t,St:a}),a+=1,o>0&&(o-=1),s+=1)},c=function(t){t&&(a=0,l+=1,t.Ue=!0,e>0&&(r.push({index:s,kt:t,xt:l}),r=r.concat(StorageResponseIndexer(t,e-1,i,s+1)),s=r[r.length-1].index+1))};return 0==e&&t.j?.Zt?.forEach(((e,o)=>u("number"==typeof e?t.content[e]:ItemController.Oe(e)))),t.j?.$t?.forEach(((e,o)=>c(t.content.find((t=>t.id==e&&t.type==GLOBAL.group))))),t.content?.forEach(((e,n)=>{e.type!=GLOBAL.group?(o>0&&(!e.Ue||t.content.length-n<=o)||-1==o)&&u(e):e.Ue||c(e)})),r},StorageResponseBuilder=async function(t,e=document.createElement("DIV"),o=1,n=3){let i=[...e.getElementsByClassName(GLOBAL.A)],r=StorageResponseIndexer(t,o,n,0);await Promise.all(r.map((async t=>{t.kt.Ue=!1,t.kt.Ut=null==t.St?t.xt:t.St,t.kt.type==GLOBAL.group?await createGroupTile(i[t.index]||e.appendChild(document.createElement("div")),t.kt):await createItemTile(i[t.index]||e.appendChild(document.createElement("a")),t.kt)})))},ResourceSlider=function(){let t,e,o,n=[],i=[];EventController.call(this,["load","loadFinish","next","previous","render","remove","close"]);let r=this;window.addEventListener("keyup",(function(t){switch(t.keyCode){case 39:r.next();break;case 37:r.Tt()}}));let a=async function(a,l){i.unshift({Ie:n[t],index:t}),i.length>2&&i.pop(),t=a,e=t+1,e>=n.length&&(e=0),o=t-1,o<0&&(o=n.length-1),n[t].X=!0,await r.I("render",[n[t]?.Ie,t,i,n[e]?.Ie,e,n[o]?.Ie,o,l])};this.Et=async function(e,o){return n=e.map((t=>({Ie:t,X:!1}))),await Promise.all(n.map((async(t,e)=>await r.I("load",[t.Ie,e])))),await a(o?n.findIndex((t=>t.Ie.hash==o.hash)):0,0),await this.I("loadFinish",[n]),t},this.close=async()=>{t=-1,await r.I("close")},this.next=async function(){n.length>1&&(await a(e,1),await r.I("next",[n[t]?.Ie,e]))},this.Tt=async function(){n.length>1&&(await a(o,-1),await r.I("previous",[n[t]?.Ie,o]))}},GestureBuilder=function(t,e={}){const o="up",n="down",i="left",r="right";let a={},l={};const s=100;t.addEventListener("touchstart",(t=>{a.x=t.touches[0].clientX,a.y=t.touches[0].clientY})),t.addEventListener("touchend",(u=>{l.x=u.changedTouches[0].clientX,l.y=u.changedTouches[0].clientY;let c=function(t,e,a,l){let u=Math.abs(a-t),c=Math.abs(l-e),d=u<c;return t<a&&!d&&u>=s?i:a<t&&!d&&u>=s?r:e<l&&d&&c>=s?n:l<e&&d&&c>=s?o:void 0}(a.x,a.y,l.x,l.y);e[c]?.call(t)}))},createErrorMsg=function(t,e,o){let n;e.innerHTML="",o?(n=document.createElement("IMG"),n.src=o):(n=document.createElement("i"),n.classList.add("mi","mi-Error","font-header"));let i=document.createElement("DIV");i.classList.add("font-title"),i.innerHTML=t.title;let r=document.createElement("SPAN");if(r.classList.add("font-base"),r.innerHTML=t.message,e.appendChild(n),e.appendChild(i),e.appendChild(r),t.tt){let t=createButton("mi-Refresh","Refresh page");t.addEventListener("click",(()=>window.location.reload(!0))),e.appendChild(t)}},createButton=function(t,e,o="A",n=!1){let i=document.createElement(o);i.classList.add("button");let r=document.createElement("I");r.classList.add("mi",t);let a=document.createElement("SPAN");return a.innerHTML=e,n||i.appendChild(r),i.appendChild(a),n&&i.appendChild(r),i},ImageHelper=function(t,e=(()=>{}),o=(()=>{}),n=(()=>{})){if(!t.src)return;return new Promise((i=>{t.onload=()=>i((e(t),void n(t))),t.onerror=()=>i((t.src="/img/image_error.webp",t.onload=function(){},o(t),void n(t)))}))},isScrollbarVisible=(t=document.body)=>t.scrollHeight>t.clientHeight,PlayViewUnLoadingAnimation=async function(){CONTENT_NODE.classList.add("closing"),await new Promise((t=>setTimeout(t,300)))};